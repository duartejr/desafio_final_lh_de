# The main job for pipeline_elt.
resources:
  jobs:
    pipeline_elt_job:
      name: pipeline_elt_job

      # trigger:
      #   # Run this job every day, exactly one day from the last run; see https://docs.databricks.com/api/workspace/jobs/create#trigger
      #   periodic:
      #     interval: 1
      #     unit: DAYS

      email_notifications:
        on_failure:
          - antonio.junior@indicium.tech

      tasks:
        - task_key: extract_raw_data_task
          notebook_task:
            notebook_path: ../src/extract_raw.ipynb
          existing_cluster_id: 0114-120134-85ri2w59
        
        - task_key: load_stage_data_task
          notebook_task:
            notebook_path: ../src/load_stage.ipynb
          depends_on: 
            - task_key: extract_raw_data_task
          existing_cluster_id: 0114-120134-85ri2w59
